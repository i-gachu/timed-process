name: Run Manually

on:
  workflow_dispatch:

jobs:
  run-bot:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v3

    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.10'

    - name: Install dependencies
      run: |
        pip install -r requirements.txt

    - name: Unzip pocketoptionapi
      run: |
        unzip pocketoptionapi.zip -d ./

    - name: Create .env file
      run: |
        echo "SSID=${{ secrets.SSID }}" >> .env
        echo "DEMO=${{ secrets.DEMO }}" >> .env
        echo "MIN_PAYOUT=${{ secrets.MIN_PAYOUT }}" >> .env
        echo "PERIOD=${{ secrets.PERIOD }}" >> .env
        echo "EXPIRATION=${{ secrets.EXPIRATION }}" >> .env
        echo "INITIAL_AMOUNT=${{ secrets.INITIAL_AMOUNT }}" >> .env
        echo "MARTINGALE_LEVEL=${{ secrets.MARTINGALE_LEVEL }}" >> .env
        echo "MIN_ACTIVE_PAIRS=${{ secrets.MIN_ACTIVE_PAIRS }}" >> .env
        echo "PROB_THRESHOLD=${{ secrets.PROB_THRESHOLD }}" >> .env
        echo "WATCHLIST=${{ secrets.WATCHLIST }}" >> .env

    - name: Run Bot
      run: |
        python i_gachu_2.py
